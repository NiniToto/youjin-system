import { useEffect, useState } from "react";
import { useTheme } from "next-themes";

export default function ThemeToggler() {
  const [mounted, setMounted] = useState(false);
  const { theme, setTheme } = useTheme();

  // 컴포넌트가 마운트된 후에만 UI를 표시하기 위함
  useEffect(() => {
    setMounted(true);
  }, []);

  const toggleTheme = () => {
    setTheme(theme === "dark" ? "light" : "dark");
  };

  // 마운트되기 전에는 렌더링하지 않음
  if (!mounted) {
    return null;
  }

  return (
    <button
      onClick={toggleTheme}
      aria-label="theme toggler"
      className="flex h-10 w-10 items-center justify-center rounded-full bg-gray-200 dark:bg-gray-700 text-black dark:text-white hover:bg-gray-300 dark:hover:bg-gray-600"
    >
      <span>
        {theme === "dark" ? (
          <svg
            viewBox="0 0 23 23"
            className="h-5 w-5"
            fill="currentColor"
          >
            <g>
              <path d="M12 11.807C10.7418 10.5483 9.88488 8.94484 9.53762 7.1993C9.19037 5.45375 9.36832 3.64444 10.049 2C8.10826 2.87311 6.51202 4.42648 5.50264 6.4242C4.49326 8.42192 4.12063 10.6852 4.44548 12.9031C4.77032 15.121 5.77961 17.1784 7.32608 18.7249C8.87255 20.2714 10.9299 21.2807 13.1478 21.6056C15.3657 21.9304 17.629 21.5578 19.6267 20.5484C21.6244 19.539 23.1778 17.9428 24.0509 16.0021C22.4064 16.6827 20.5971 16.8607 18.8515 16.5134C17.106 16.1661 15.5026 15.3092 14.2438 14.0509C13.8697 13.6773 13.5321 13.261 13.236 12.8074C12.7835 12.1279 12.4611 11.3733 12.28 10.58L12 11.807Z" />
            </g>
          </svg>
        ) : (
          <svg
            viewBox="0 0 25 24"
            className="h-5 w-5"
            fill="currentColor"
          >
            <g>
              <path d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z" />
              <path d="M12 24C12.3315 24 12.6495 23.8707 12.8839 23.6364C13.1183 23.402 13.2476 23.0839 13.2476 22.7524V22.5714C13.2476 22.2399 13.1183 21.9219 12.8839 21.6875C12.6495 21.4532 12.3315 21.3238 12 21.3238C11.6685 21.3238 11.3505 21.4532 11.1161 21.6875C10.8817 21.9219 10.7524 22.2399 10.7524 22.5714V22.7524C10.7524 23.0839 10.8817 23.402 11.1161 23.6364C11.3505 23.8707 11.6685 24 12 24Z" />
              <path d="M19.4329 20.4331C19.6673 20.1987 19.7966 19.8807 19.7966 19.5492C19.7966 19.2178 19.6673 18.8997 19.4329 18.6654L19.2519 18.4844C19.0383 18.2707 18.7457 18.1525 18.44 18.1601C18.1344 18.1676 17.8477 18.3002 17.6451 18.5242C17.4426 18.7482 17.3403 19.0473 17.3623 19.3516C17.3843 19.6558 17.5288 19.9371 17.7599 20.1331L17.9409 20.3141C18.1752 20.5485 18.4933 20.6778 18.8247 20.6778C19.1562 20.6778 19.4743 20.5485 19.7086 20.3141H19.4329" />
              <path d="M12 2.67617C12.3315 2.67617 12.6495 2.54684 12.8839 2.31248C13.1183 2.07812 13.2476 1.76009 13.2476 1.42855V1.24759C13.2476 0.916051 13.1183 0.598022 12.8839 0.363659C12.6495 0.129295 12.3315 -3.21732e-08 12 -6.16536e-08C11.6685 -9.1134e-08 11.3505 0.129295 11.1161 0.363659C10.8817 0.598022 10.7524 0.916051 10.7524 1.24759V1.42855C10.7524 1.76009 10.8817 2.07812 11.1161 2.31248C11.3505 2.54684 11.6685 2.67617 12 2.67617Z" />
              <path d="M19.4329 3.6853L19.2519 3.86626C19.0703 4.0447 18.9516 4.27608 18.9124 4.52358C18.8732 4.77108 18.9156 5.02408 19.0331 5.24532C19.1506 5.46655 19.3373 5.6444 19.5673 5.75162C19.7973 5.85883 20.0578 5.89021 20.3107 5.84197C20.5636 5.79373 20.7979 5.6685 20.9771 5.48613C21.1563 5.30376 21.2711 5.07352 21.3081 4.82387C21.345 4.57423 21.3025 4.32102 21.1856 4.10098C21.0688 3.88093 20.884 3.70397 20.6589 3.59927L20.4969 3.52027C20.3793 3.46745 20.2539 3.43327 20.1257 3.41907C19.9975 3.40486 19.868 3.41082 19.7425 3.43669C19.617 3.46255 19.4972 3.50798 19.3884 3.57107C19.2797 3.63416 19.1834 3.71407 19.1033 3.80807L19.4329 3.6853Z" />
              <path d="M4.56717 20.4331L4.74813 20.6141C4.9326 20.7925 5.05123 21.0239 5.09045 21.2714C5.12967 21.5189 5.08723 21.7719 4.96975 21.9931C4.85226 22.2144 4.66559 22.3922 4.43555 22.4994C4.20552 22.6067 3.94502 22.638 3.69207 22.5898C3.43912 22.5415 3.20483 22.4163 3.02561 22.2339C2.84639 22.0516 2.73156 21.8213 2.69463 21.5717C2.65769 21.322 2.70017 21.0688 2.81705 20.8488C2.93394 20.6288 3.11872 20.4518 3.34374 20.3471L3.50574 20.2681C3.6233 20.2153 3.74874 20.1811 3.87689 20.1669C4.00504 20.1527 4.13466 20.1587 4.2602 20.1845C4.3857 20.2104 4.50543 20.2558 4.61417 20.3189C4.72292 20.382 4.81922 20.4619 4.89937 20.5559L4.56717 20.4331Z" />
              <path d="M4.56717 3.6853C4.33278 3.4509 4.01472 3.32153 3.68318 3.32153C3.35164 3.32153 3.03358 3.4509 2.79919 3.6853L2.61823 3.86626C2.38386 4.10064 2.25449 4.4187 2.25449 4.75024C2.25449 5.08178 2.38386 5.39984 2.61823 5.63423C2.85261 5.86861 3.17067 5.99798 3.50221 5.99798C3.83375 5.99798 4.15181 5.86861 4.38619 5.63423L4.56717 5.45327C4.80154 5.21889 4.93091 4.90083 4.93091 4.56929C4.93091 4.23775 4.80154 3.91969 4.56717 3.68531V3.6853Z" />
              <path d="M23.2381 11.4286H23.0571C22.7256 11.4286 22.4075 11.5579 22.1732 11.7923C21.9388 12.0266 21.8095 12.3447 21.8095 12.6762C21.8095 13.0076 21.9388 13.3257 22.1732 13.56C22.4075 13.7944 22.7256 13.9237 23.0571 13.9237H23.2381C23.5695 13.9237 23.8876 13.7944 24.122 13.56C24.3563 13.3257 24.4857 13.0076 24.4857 12.6762C24.4857 12.3447 24.3563 12.0266 24.122 11.7923C23.8876 11.5579 23.5695 11.4286 23.2381 11.4286Z" />
              <path d="M0.942883 11.4286H0.7619C0.595686 11.4286 0.43098 11.4614 0.276026 11.5254C0.121072 11.5894 -0.0210727 11.6834 -0.143456 11.8019C-0.265839 11.9204 -0.365979 12.0611 -0.437905 12.2159C-0.509832 12.3708 -0.551908 12.5369 -0.561558 12.7067C-0.571207 12.8766 -0.54824 13.0463 -0.493974 13.2067C-0.439709 13.367 -0.355294 13.5148 -0.245689 13.6421C-0.136085 13.7693 -0.00341516 13.8732 0.142354 13.9481C0.288123 14.023 0.444359 14.0674 0.60374 14.0791L0.942883 14.0791C1.27443 14.0791 1.59245 13.9497 1.82682 13.7154C2.06118 13.481 2.19051 13.163 2.19051 12.8314C2.19051 12.4999 2.06118 12.1818 1.82682 11.9475C1.59245 11.7131 1.27443 11.5838 0.942883 11.5838V11.4286Z" />
            </g>
          </svg>
        )}
      </span>
    </button>
  );
}
